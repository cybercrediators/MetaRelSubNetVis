<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Responsive sidebar template with sliding effect and dropdown menu based on bootstrap 3">
  <title>Sidebar template</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
        crossorigin="anonymous">
  <link href="https://use.fontawesome.com/releases/v5.13.0/css/all.css" rel="stylesheet">


</head>

<body>
<div class="page-wrapper chiller-theme" [class.toggled]="sideBarShown">
  <a id="show-sidebar" class="btn btn-lg btn-dark" href="#" (click)="sideBarShown = true">
    <i class="fas fa-bars"></i>
  </a>
  <nav id="sidebar" class="sidebar-wrapper">
    <div class="sidebar-content">
      <div class="sidebar-brand">
        <a href="#">Explore the Networks</a>
        <div id="close-sidebar" (click)="sideBarShown = false">
          <i class="fas fa-times"></i>
        </div>
      </div>
<!--&lt;!&ndash;      Info box    &ndash;&gt;-->
<!--      <div class="sidebar-menu">-->
<!--        <ul>-->
<!--          <li class="header-menu">-->
<!--            <span>Info</span>-->
<!--          </li>-->
<!--        </ul>-->
<!--      </div>-->

      <div class="sidebar-menu">
        <ul>
          <li class="header-menu">
            <span>Settings</span>
          </li>
<!--Choose a Patient          -->
          <li class="sidebar-dropdown" [class.active]="activeMenuItem.patient">
            <a href="#" (click)="toggleMenu('patient')">
              <i class="fas fa-hospital-user"></i>
              <span>Patients</span>
<!--              <span class="badge badge-pill badge-warning">New</span>-->
            </a>
            <div class="sidebar-submenu" [style.display]="activeMenuItem.patient ? 'block':'none'">
              <ul>
                <li class="row custom-form-group">
                  <div class="col-6 ">
                    <p>
                      <span>Metastatic Patient:</span>
                      <select [(ngModel)]="selectedMetastaticPatient" class="form-control" (change)="setMetastaticPatient(selectedMetastaticPatient)">
                        <option class="dropdown-item" selected [ngValue]="undefined" ><hr/></option>
                        <option class="dropdown-item" *ngFor="let pat of patients.metastatic" [ngValue]="pat" >{{pat.name}} ({{pat.subtype}})</option>
                      </select>
                    </p>
                    <span *ngIf="selectedMetastaticPatient !== undefined">
                      <p>Cancer Subtype: <br/><b>{{selectedMetastaticPatient.subtype}}</b></p>
                      <p>Metastasis free Survival: <b>{{selectedMetastaticPatient.mfsYears}} years</b></p>
                    </span>
                  </div>
                  <div class="col-6 ">
                    <p>
                      <span>Non-Metastatic Patient:</span>
                      <select [(ngModel)]="selectedNonmetastaticPatient" class="form-control" (change)="setNonMetastaticPatient(selectedNonmetastaticPatient)">
                        <option class="dropdown-item" selected [ngValue]="undefined"><hr/></option>
                        <option class="dropdown-item" *ngFor="let pat of patients.nonmetastatic" [ngValue]="pat">{{pat.name}} ({{pat.subtype}})</option>
                      </select>
                    </p>
                    <span *ngIf="selectedNonmetastaticPatient !== undefined">
                      <p>Cancer Subtype: <br/><b>{{selectedNonmetastaticPatient.subtype}}</b></p>
                      <p>Metastasis free Survival: <b>{{selectedNonmetastaticPatient.mfsYears}} years</b></p>
                    </span>
                  </div>
                </li>
              </ul>
            </div>
          </li>

<!--          Choose Threshold      -->
          <li class="sidebar-dropdown" [class.active]="activeMenuItem.threshold">
            <a href="#" (click)="toggleMenu('threshold')">
              <i class="fas fa-sort-amount-up"></i>
              <span>Threshold</span>
<!--              <span class="badge badge-pill badge-danger">3</span>-->
            </a>
            <div class="sidebar-submenu" [style.display]="activeMenuItem.threshold ? 'block':'none'">
              <ul *ngIf="thresholds !== undefined">
                <li [style.display]="(selectedMetastaticPatient !== undefined)&&(selectedNonmetastaticPatient === undefined) ? 'block':'none'">
                  <div class="input-group mb-3 custom-form-group">
                    <div class="input-group-prepend">
                      <span class="input-group-text" id="basic-addon1">Metastatic:</span>
                    </div>
                    <input type="text" class="form-control" id="metastatic-input"
                           value="{{thresholds.metastatic.selected / thresholds.multiplier}}"
                           aria-describedby="basic-addon3" disabled>
                  </div>
                  <div class="form-group custom-form-group">
                    <input type="range" class="custom-range" id="customRange1"
                           min="{{thresholds.metastatic.threshold * thresholds.multiplier}}"
                           max="{{thresholds.metastatic.max * thresholds.multiplier}}"
                           [(ngModel)]="thresholds.metastatic.selected"
                           (change)="updateThreshold(thresholds)">
                    <div class="row justify-content-between">
                      <div class="col-4">
                        {{thresholds.metastatic.threshold}}
                      </div>
                      <div class="col-4 text-right">
                        {{thresholds.metastatic.max}}
                      </div>
                    </div>
                  </div>
                </li>
                <li [style.display]="((selectedMetastaticPatient === undefined)&&(selectedNonmetastaticPatient !== undefined)) ? 'block':'none'">
                  <div class="input-group mb-3 custom-form-group">
                    <div class="input-group-prepend">
                      <span class="input-group-text" id="basic-addon2">Non-Metastatic:</span>
                    </div>
                    <input type="text" class="form-control" id="non-metastatic-input"
                           value="{{thresholds.nonmetastatic.selected / thresholds.multiplier}}"
                           aria-describedby="basic-addon3" disabled>
                  </div>
                  <div class="form-group custom-form-group">
                    <input type="range" class="custom-range" id="customRange2"
                           min="{{thresholds.nonmetastatic.threshold * thresholds.multiplier}}"
                           max="{{thresholds.nonmetastatic.max * thresholds.multiplier}}"
                           [(ngModel)]="thresholds.nonmetastatic.selected"
                           (change)="updateThreshold(thresholds)">
                    <div class="row justify-content-between">
                      <div class="col-4">
                        {{thresholds.nonmetastatic.threshold}}
                      </div>
                      <div class="col-4 text-right">
                        {{thresholds.nonmetastatic.max}}
                      </div>
                    </div>
                  </div>
                </li>
                <li [style.display]="((selectedMetastaticPatient !== undefined)&&(selectedNonmetastaticPatient !== undefined)) ? 'block':'none'">
                  <div class="input-group mb-3 custom-form-group">
                    <div class="input-group-prepend">
                      <span class="input-group-text" id="basic-addon3">Both Patients:</span>
                    </div>
                    <input type="text" class="form-control" id="both-patients-input"
                           value="{{thresholds.selected / thresholds.multiplier}}"
                           aria-describedby="basic-addon3" disabled>
                  </div>
                  <div class="form-group custom-form-group">
                    <input type="range" class="custom-range" id="customRange3"
                           min="{{thresholds.minThreshold * thresholds.multiplier}}"
                           max="{{thresholds.maxThreshold * thresholds.multiplier}}"
                           [(ngModel)]="thresholds.selected"
                           (change)="updateThreshold(thresholds)">
                    <div class="row justify-content-between">
                      <div class="col-4">
                        {{thresholds.minThreshold}}
                      </div>
                      <div class="col-4 text-right">
                        {{thresholds.maxThreshold}}
                      </div>
                    </div>
                  </div>
                </li>
                <li [style.display]="((selectedMetastaticPatient === undefined) && (selectedNonmetastaticPatient === undefined)) ? 'block':'none'">
                  <legend>Select some patients from the upper menu</legend>
                </li>
              </ul>
            </div>
          </li>
          <!--      Choose a Node          -->
          <li class="sidebar-dropdown" [class.active]="activeMenuItem.nodes">
            <a href="#" (click)="toggleMenu('nodes')">
              <i class="fas fa-project-diagram"></i>
              <span>Nodes</span>
            </a>
            <div class="sidebar-submenu" [style.display]="activeMenuItem.nodes ? 'block':'none'">
              <div class="sidebar-search">
                <div>
                  <div class="input-group">
                    <input type="text" class="form-control search-menu" placeholder="Search..."
                           [(ngModel)]="searchNode"
                           (input)="updateNetwork()"
                           autofocus>
                    <!--                           autofocus>-->
                    <div class="input-group-append">
                      <span class="input-group-text search-icon">
                        <i *ngIf="searchNode.length !== 0" (click)="resetNodeSearch()" class="far fa-times-circle"></i>
                        <i *ngIf="searchNode.length === 0" class="fa fa-search" aria-hidden="true"></i>
                      </span>
                    </div>
                    <button type="button" class="btn btn-secondary" disabled>{{nodes.length}}</button>
                  </div>
                </div>
              </div>
<!--              <ul class="list-group">-->
<!--                <li type="button"-->
<!--                    class="list-group-item list-group-item-dark">Protein</li>-->
<!--              </ul>-->
<!--              <ul class="list-group">-->
<!--                <li type="button"-->
<!--                    class="list-group-item list-group-item-secondary"-->
<!--                    *ngFor="let node of nodes"-->
<!--                    (click)="highlightNode(node.id)"-->
<!--                [class.selected]="node.id === selectedNode">{{node.id}} ({{nodeInfo[node.id].all}})</li>-->
<!--              </ul>-->
              <ul class="list-group">
              <table class="table table-hover table-dark">
                <thead>
                <tr>
                  <th scope="col" class="w25"
                      (click)="updateNodeSort('name')">Protein</th>
                  <th scope="col" class="w25" *ngIf="selectedNonmetastaticPatient === undefined"></th>
                  <th scope="col" class="w25">
                    <div *ngIf="selectedMetastaticPatient !== undefined"
                         (click)="updateNodeSort(selectedMetastaticPatient.subtype)">
                      {{selectedMetastaticPatient.subtype}} ({{subtypeCounts[selectedMetastaticPatient.subtype]}})
                    </div>
                  </th>
                  <th scope="col" class="w25" *ngIf="selectedNonmetastaticPatient !== undefined"
                      (click)="updateNodeSort(selectedNonmetastaticPatient.subtype)">
                      {{selectedNonmetastaticPatient.subtype}} ({{subtypeCounts[selectedNonmetastaticPatient.subtype]}})
                  </th>
                  <th scope="col" class="w25"
                      (click)="updateNodeSort('all')">
                    All ({{subtypeCounts !== undefined ? subtypeCounts["all"] : ""}})
                  </th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let node of nodes"
                  (click)="highlightNode(node.id)"
                  [class.selected]="selectedNode.includes(node.id)">
                  <td class="w25">{{node.id}}</td>
                  <td class="w25" *ngIf="selectedNonmetastaticPatient === undefined || selectedMetastaticPatient === selectedNonmetastaticPatient"></td>
                  <td class="w25">{{selectedMetastaticPatient !== undefined ? nodeInfo[node.id][selectedMetastaticPatient.subtype] : ""}}</td>
                  <td class="w25" *ngIf="selectedNonmetastaticPatient !== undefined && selectedMetastaticPatient !== selectedNonmetastaticPatient">{{nodeInfo[node.id][selectedNonmetastaticPatient.subtype]}}</td>
                  <td class="w25">{{nodeInfo[node.id].all}}</td>
                </tr>
                </tbody>
              </table>
              </ul>
              <ul class="list-group">
                <button type="button" class="btn btn-secondary"
                        (click)="highlightNode(undefined)"
                        [style.display]="selectedNode.length === 0 ? 'none':'block'">unselect</button>
              </ul>
            </div>
          </li>
                <!--          Choose Layout      -->
          <li class="sidebar-dropdown" [class.active]="activeMenuItem.layout">
            <a href="#" (click)="toggleMenu('layout')">
              <i class="fas fa-palette"></i>
              <span>Layout</span>
            </a>
            <div class="sidebar-submenu" [style.display]="activeMenuItem.layout ? 'block':'none'">
              <ul>
                <li class="form-group" [style.display]="((selectedMetastaticPatient !== undefined) || (selectedNonmetastaticPatient !== undefined)) ? 'block':'none'">
                  <legend>Color Nodes</legend>
                  <div *ngFor="let opt of objectKeys(layoutNodeColorOptions)" class="custom-control custom-radio "  >
                    <input type="radio" id="nodeColorBy{{opt}}" name="customRadioNodeColor" class="custom-control-input"
                           [(ngModel)]="layoutNodeColor"
                           [value]="opt"
                           (change)="updateNodeColor(layoutNodeColor)"
                           [checked]="layoutNodeColor===opt">
                    <label class="custom-control-label layout-list-label" for="nodeColorBy{{opt}}">
                      <div>by {{layoutNodeColorOptions[opt]}}
                        <strong *ngIf="opt==='geLevel' && layoutNodeColor === opt">(
                          <b style="background-color:#599eff;color:#383838;">Low</b>,
                          <b style="background-color:#e8e857;color:#383838;">Normal</b>,
                          <b style="background-color:#ff3d6a;color:#383838;">High</b>)
                        </strong>
                        <div class="color-legend" *ngIf="opt === 'ge' && layoutNodeColor === opt" align="center">
                          <div class="from">{{patients.geMin | number:'1.1-1'}}</div>
                          <div class="mid-ge"></div>
                          <div class="to">{{patients.geMax | number:'1.1-1'}}</div>
                        </div>
                        <div class="color-legend" *ngIf="opt === 'rel' && layoutNodeColor === opt" align="center">
                          <div class="from">{{thresholds.minThreshold}}</div>
                          <div class="mid-rel"></div>
                          <div class="to">{{thresholds.maxThreshold}}</div>
                        </div>
                      </div>
                    </label>
                  </div>
                </li>
                <li class="form-group" [style.display]="((selectedMetastaticPatient !== undefined) || (selectedNonmetastaticPatient !== undefined)) ? 'block':'none'">
                  <legend>Show All Nodes
                    <label class="switch" >
                      <input type="checkbox" class="primary" [(ngModel)]="layoutAllNodes" (change)="updateAllNodes(layoutAllNodes)">
                      <span class="slider round"></span>
                    </label>
                  </legend>
                  <legend>Show MTB results <div class="circle"></div>
                    <label class="switch" >
                      <input type="checkbox" class="primary" [(ngModel)]="layoutMtbNodes" (change)="updateMtbNodes(layoutMtbNodes)">
                      <span class="slider round"></span>
                    </label>
                  </legend>
                  <legend [style.display]="((selectedMetastaticPatient !== undefined) && (selectedNonmetastaticPatient !== undefined)) ? 'block':'none'">
                    Show Only Shared Nodes
                    <label class="switch" >
                      <input type="checkbox" class="primary" [(ngModel)]="layoutOnlyShared" (change)="updateSharedNodes(layoutOnlyShared)">
                      <span class="slider round"></span>
                    </label>
                  </legend>
                </li>
                <li class="form-group" [style.display]="XOR((selectedMetastaticPatient !== undefined), (selectedNonmetastaticPatient !== undefined)) ? 'block':'none'">
                  <legend>Set Node Size</legend>
                  <div *ngFor="let opt of objectKeys(layoutNodeSizeOptions)" class="custom-control custom-radio custom-control-inline"  >
                    <input type="radio" id="nodeSizeBy{{opt}}" name="customRadioNodeSize" class="custom-control-input"
                           [(ngModel)]="layoutNodeSize"
                           [value]="opt"
                           (change)="updateNodeSize(layoutNodeSize)"
                           [checked]="layoutNodeSize===opt">
                    <label class="custom-control-label" for="nodeSizeBy{{opt}}">by {{layoutNodeSizeOptions[opt]}}</label>
                  </div>
                </li>
                <li class="row mb-3 custom-form-group">
                  <div class="col-12">
                    <button class="btn btn-block btn-secondary" (click)="fitGraphToViewport()">
                      Fit Graph To Viewport
                    </button>
                  </div>
                </li>
                <li [style.display]="((selectedMetastaticPatient === undefined) && (selectedNonmetastaticPatient === undefined)) ? 'block':'none'">
                  <legend>Select some patients from the upper menu</legend>
                </li>
              </ul>
            </div>
          </li>
<!--          Download Network as Image     -->
          <li class="sidebar-dropdown" [class.active]="activeMenuItem.download">
            <a href="#" (click)="toggleMenu('download')">
              <i class="fas fa-arrow-circle-down"></i>
              <span>Download</span>
            </a>
            <div class="sidebar-submenu" [style.display]="activeMenuItem.download ? 'block':'none'">
              <ul>
                <li class="row mb-3 custom-form-group">
                    <div class="btn-group btn-group-toggle col-7" data-toggle="buttons">
                      <label class="btn btn-secondary" [class.active]="downloadFormat ==='png'">
                        <input type="radio" name="options" id="downloadFormat1"
                               [(ngModel)]="downloadFormat"
                               value="png"
                               [checked]="downloadFormat === 'png'"> PNG
                      </label>
                      <label class="btn btn-secondary" [class.active]="downloadFormat ==='jpg'">
                        <input type="radio" name="options" id="downloadFormat2"
                               [(ngModel)]="downloadFormat"
                               value="jpg"
                               [checked]="downloadFormat ==='jpg'"> JPEG
                      </label>

                      <label class="btn btn-secondary" [class.active]="downloadFormat ==='svg'">
                        <input type="radio" name="options" id="downloadFormat2"
                               [(ngModel)]="downloadFormat"
                               value="svg"
                               [checked]="downloadFormat ==='svg'"> SVG
                      </label>
                    </div>
                    <div class="col-5 text-right">
                      <button class="btn btn-secondary btn-small" (click)="downloadImage(downloadFormat)">
                        Download
                      </button>
                    </div>
                </li>
                <li  [style.display]="downloadFormat !== 'svg' ? 'block':'none'">
                  <div class="input-group mb-3 custom-form-group">
                    <div class="input-group-prepend">
                      <span class="input-group-text" id="scaleImage">Scale Image by </span>
                    </div>
                    <input type="text" class="form-control" id="scaleImage-input"
                           [(ngModel)]="downloadScaleImageBy"
                           aria-describedby="scaleImage">
                  </div>
                </li>
                <li class="form-group" [style.display]="downloadFormat === 'png' ? 'block':'none'">
                  <legend>Transparent Background
                    <label class="switch" >
                      <input type="checkbox" class="primary" [(ngModel)]="downloadTransparent" >
                      <span class="slider round"></span>
                    </label>
                  </legend>
                </li>
              </ul>
            </div>
          </li>

        </ul>
      </div>
      <!-- sidebar-menu  -->
      <div class="sidebar-menu" [style.display]="activeMenuItem.impressum ? 'block':'none'">
        <h3><a href="http://mypathsem.bioinf.med.uni-goettingen.de/">MyPathSem Project</a></h3>
        <h3><a href="http://mypathsem.bioinf.med.uni-goettingen.de/impressum">Impressum</a></h3>
        <h3><a href="http://mypathsem.bioinf.med.uni-goettingen.de/datenschutz">Datenschutz</a></h3>
      </div>
    </div>
    <!-- sidebar-content  -->
        <div class="sidebar-footer">
          <a href="#" (click)="toggleMenu('impressum')">
           Impressum
          </a>
        </div>
  </nav>

  <!-- sidebar-wrapper  -->
  <main class="page-content">
    <div #page class="container-fluid" style="height: 100%;">
      <div #heading class="row">
        <h2>{{title}}</h2>
      <hr>
      </div>
      <div #cy class="row" [ngStyle]="{'height.px': page.offsetHeight - heading.offsetHeight -50}" ></div>
    </div>

  </main>
  <!-- page-content" -->
</div>
<!-- page-wrapper -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>

</body>

</html>
