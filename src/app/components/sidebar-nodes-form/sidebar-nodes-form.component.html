<!-- filter form -->
<div class="input-group">
  <input type="text"
         class="form-control"
         placeholder="Search..."
         (input)="filterTermChanged.emit(filterTerm.value)"
         id="filterTerm"
         #filterTerm
         aria-label="Filter nodes">
  <button *ngIf="filterTerm.value.length > 0"
          (click)="filterTerm.value = ''; filterTermChanged.emit('')"
          class="btn btn-dark" type="button" id="clearSearch">
    <fa-icon icon="times"></fa-icon>
  </button>
  <button *ngIf="nodes"
          class="btn btn-dark"
          disabled="true"
          type="button">
    {{nodes.length}}
  </button>
</div>

<hr />

<ng-container *ngIf="occurrences && numberOfColumns && markedNodes && nodes">

  <!-- table head -->
  <table class="table table-borderless text-light">
    <thead>
    <tr class="border-bottom">
      <!-- protein -->
      <th class="w-{{ numberOfColumns < 4 ? '50' : '25' }}">Protein</th>
      <!-- meta patient -->
      <th class="cursor w-25" *ngIf="subTypeColumnA" (click)="sortingChanged.emit(0)">
        {{ subTypeColumnA }}&nbsp; ({{occurrences[subTypeColumnA]}})
      </th>
      <!-- non-meta patient -->
      <th class="cursor w-25" *ngIf="subTypeColumnB" (click)="sortingChanged.emit(1)">
        {{ subTypeColumnB }}&nbsp; ({{occurrences[subTypeColumnB]}})
      </th>
      <!-- total -->
      <th
        class="cursor"
        [ngClass]="numberOfColumns === 2 ? 'w-50' : 'w-25'"
        (click)="sortingChanged.emit(2)"
      >
        All&nbsp;({{ occurrences.all }})
      </th>
    </tr>
    </thead>
  </table>

  <!-- table body scrollable -->
  <div id="table-nodes" class="scroll-style">
    <table class="table table-borderless text-light">
      <tbody>
      <ng-container *ngFor="let node of nodes">
        <tr class="cursor"
            [ngClass]="markedNodes.includes(node) ? 'bg-info' : ''"
            (click)="nodeClicked.emit(node)" >
          <td class="w-{{ numberOfColumns < 4 ? '50' : '25' }}">
            {{ node.data.name }}
          </td>
          <td class="w-25" *ngIf="subTypeColumnA">
            {{ node.occ[subTypeColumnA] }}
          </td>
          <td class="w-25" *ngIf="subTypeColumnB">
            {{ node.occ[subTypeColumnB] }}
          </td>
          <td [ngClass]="numberOfColumns === 2 ? 'w-50' : 'w-25'">
            {{ node.occ.all }}
          </td>
        </tr>
      </ng-container>
      </tbody>
    </table>
  </div>

</ng-container>

<!-- Unselect -->
<div class="d-grid mt-2" *ngIf="markedNodes && markedNodes.length > 0">
  <button (click)="unmarkAllNodes.emit()" class="btn btn-secondary">
    <fa-icon icon="redo"></fa-icon>&nbsp;Unselect all
  </button>
</div>
